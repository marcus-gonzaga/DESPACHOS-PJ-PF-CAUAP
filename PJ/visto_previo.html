<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="../styles.css">
        <title>PJ - Visto Prévio</title>
    </head>
    <body>
        <div id="header-placeholder"></div>
        <main>
            <div class="container-fluid">
                <div class="row p-3">
                    <div class="col-md-12">
                        <h3 class="d-flex align-items-center mt-2">Visto Prévio</h3>
                        <div class="mb-3 mt-3">
                            <button class="btn btn-sm btn-secondary mt-2" style="width: 90px" id="restartButton"><i class="fa fa-rotate-right pr-1"></i>Reiniciar</button>
                            <button class="btn btn-sm btn-secondary mt-2" style="width: 105px" id="cleanButton"><i class="fa fa-eraser pr-1"></i>Desmarcar</button>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho1" data-text="">
                            <label class="form-check-label" for="despacho1">
                                <span contenteditable="false">Destinatário.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal1"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal1"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho2" data-text="">
                            <label class="form-check-label" for="despacho2">
                                <span contenteditable="false">Visto Prévio Alteração Contratual.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal2"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal2"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho3" data-text="">
                            <label class="form-check-label" for="despacho3">
                                <span contenteditable="false">Visto Prévio Distrato Social.</strong></span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal3"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal3"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho4" data-text="">
                            <label class="form-check-label" for="despacho4">
                                <span contenteditable="false">Visto Prévio Constituição.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal4"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal4"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho5" data-text="">
                            <label class="form-check-label" for="despacho5">
                                <span contenteditable="false">Atendimento Presencial Confirmado.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal5"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal5"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho6" data-text="">
                            <label class="form-check-label" for="despacho6">
                                <span contenteditable="false">Procedimento Visto Prévio.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal6"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal6"></i>
                        </div>
                        <div class="form-check mb-1">
                            <input type="checkbox" class="form-check-input" id="despacho7" data-text="">
                            <label class="form-check-label" for="despacho7">
                                <span contenteditable="false">Visto Prévio de Alteração Contratual de Empresa sem registro no CAU.</span>
                            </label>
                            <i class="edit-icon fa fa-pencil" data-toggle="modal" data-target="#editModal7"></i>
                            <i class="info-icon fa fa-info" data-toggle="modal" data-target="#infoModal7"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal1">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal1" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(1)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal2">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal2" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(2)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal3">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal3" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(3)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal4">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal4" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(4)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal5">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal5" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(5)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal6">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal6" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(6)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal7">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Despacho</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <textarea class="form-control" rows="12" id="editTextModal7" style="line-height: 1;"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="button" class="btn btn-primary" onclick="saveEdit(7)">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div id="dataTextDisplay">
                            <h4 class="ml-3">Despacho:</h4>
                            <textarea id="selectedDataText" class="form-control border-dark" rows="10" style="line-height: 1;"></textarea>
                            <div class="mt-3 text-center">
                                <button class="btn btn-primary d-inline m-1" style="width: 90px" id="updateButton">Atualizar</button>
                                <button class="btn btn-danger d-inline m-1" style="width: 90px" id="deleteButton">Deletar</button>
                                <button class="btn btn-success d-inline m-1" style="width: 90px" id="copyButton">Copiar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div id="footer-placeholder"></div>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script>
            function loadHTML(url, elementId) {
                const finalUrl = `${window.location.origin}/${url}`;
                fetch(finalUrl)
                    .then(response => {
                        if (!response.ok) { throw new Error(`HTTP error! status: ${response.status} for ${finalUrl}`); }
                        return response.text();
                    })
                    .then(html => {
                        document.getElementById(elementId).innerHTML = html;
                        if (elementId === 'header-placeholder') {
                            setTimeout(() => { if (typeof $ !== 'undefined' && $.fn.dropdown) { $('[data-toggle="dropdown"]').dropdown(); } else { console.warn("jQuery ou Bootstrap Dropdown não encontrado."); } }, 100);
                        }
                    })
                    .catch(error => console.error('Erro ao carregar HTML partial:', error));
            }
            document.addEventListener('DOMContentLoaded', function() {
                loadHTML('header-partial.html', 'header-placeholder');
                loadHTML('footer-partial.html', 'footer-placeholder');
            });

            function saveEdit(despachoNumber) {
                const editTextModal = $('#editTextModal' + despachoNumber).val();
                const checkbox = $('#despacho' + despachoNumber);
                checkbox.find('span').text(editTextModal);
                checkbox.data('text', editTextModal);
                $('#dataTextDisplay' + despachoNumber).text(editTextModal);
                $('#editModal' + despachoNumber).modal('hide');
            }
            $('#copyButton').click(function() {
                const selectedDataText = $('#selectedDataText').val();
                if (selectedDataText !== 'Nenhum selecionado') {
                    const el = document.createElement('textarea');
                    el.value = selectedDataText;
                    document.body.appendChild(el);
                    el.select();
                    document.execCommand('copy');
                    document.body.removeChild(el);
                }
            });
            $('#updateButton').click(function() {
                const selectedCheckboxes = $('input[type="checkbox"]:checked');
                const selectedDataText = Array.from(selectedCheckboxes).map(checkbox => $(checkbox).data('text')).join('\n');
                $('#selectedDataText').val(selectedDataText || 'Nenhum selecionado');
                $('#selectedDataText').height('auto');
                $('#selectedDataText').height($('#selectedDataText')[0].scrollHeight);
            });
            $(document).ready(function() {
                $('#deleteButton').click(function() {
                    $('#selectedDataText').val('');
                });
            });
            $(document).ready(function() {
                $('#restartButton').click(function() {
                    location.reload();
                });
            });
            $(document).ready(function() {
                function desmarcarTodasCheckboxes() {
                    $('input[type="checkbox"]').prop('checked', false);
                }
                $('.collapse').on('hidden.bs.collapse', function() {
                    $(this).find('input[type="checkbox"]').prop('checked', false);
                });
                $('#cleanButton').click(function() {
                    desmarcarTodasCheckboxes();
                    $('.collapse.show').collapse('hide');
                });
            });
            var texto_1 = `Bom dia/Tarde Prezado,
`;
            document.getElementById('despacho1').setAttribute('data-text', texto_1);
            document.getElementById('editTextModal1').value = texto_1;
            var texto_2 = `A alteração contratual da empresa XXXXXXXXXXXXXXXX foi analisada e não há pendências para receber o visto prévio do CAU/AP.
Há a opção de atendimento presencial dia XX/XX/XXX (xxxxx-feira) as 00:00 a ser realizado na sede do CAU/AP. Caso deseje atendimento presencial neste dia e horário, por gentileza informar o nome e o RG da pessoa que comparecerá a sede.

No atendimento presencial as vias da alteração contratual serão carimbadas e assinadas no ato da entrega.
Todas as vias da alteração contratual a serem recebidas o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.



Há também a opção de apresentação das vias originais da alteração contratual na sede do conselho:

CAU/AP - Av Caramuru, 356, Beirol, Macapá/AP - CEP 68902-100.

Todas as vias da alteração contratual a serem recebidas o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.

A documentação será carimbada, assinada e devolvida ao endereço do remetente.



Em caso de visto prévio digital requerido pelo cartório, por gentileza enviar a Nota de Exigência do Cartório. 

Atenciosamente,
`;
            document.getElementById('despacho2').setAttribute('data-text', texto_2);
            document.getElementById('editTextModal2').value = texto_2;
            var texto_3 = `O distrato social da empresa XXXXXXXXXXXXXXXX foi analisado e não há pendências para receber o visto prévio do CAU/AP.

Há a opção de atendimento presencial dia XX/XX/XXX (xxxxx-feira) as 00:00 a ser realizado na sede do CAU/AP. Caso deseje atendimento presencial neste dia e horário, por gentileza informar o nome e o RG da pessoa que comparecerá a sede.

No atendimento presencial as vias do distrato social serão carimbados e assinados no ato da entrega.
Todas as vias do distrato social a serem recebidos o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.



Há também a opção de apresentação das vias originais da alteração contratual na sede do conselho:

CAU/AP - Av Caramuru, 356, Beirol, Macapá/AP - CEP 68902-100.

Todas as vias do distrato social a serem recebidos o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.

A documentação será carimbada, assinada e devolvida ao endereço do remetente.



Informo que visto prévio ainda é realizado de forma física, o carimbo do CAU é inserido fisicamente nas folhas da alteração contratual.

O CAU ainda não possui visto prévio de forma digital.

Atenciosamente,
`;
            document.getElementById('despacho3').setAttribute('data-text', texto_3);
            document.getElementById('editTextModal3').value = texto_3;
            var texto_4 = `O contrato social da empresa XXXXXXXXXXXXXXXX foi analisado e não há pendências para receber o visto prévio do CAU/AP.
Há a opção de atendimento presencial dia XX/XX/XXX (xxxxx-feira) as 00:00 a ser realizado na sede do CAU/AP. Caso deseje atendimento presencial neste dia e horário, por gentileza informar o nome e o RG da pessoa que comparecerá a sede.

No atendimento presencial as vias do contrato social serão carimbados e assinados no ato da entrega.
Todas as vias do contrato social a serem recebidos o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.



Há também a opção de apresentação das vias originais da alteração contratual na sede do conselho:

CAU/AP - Av Caramuru, 356, Beirol, Macapá/AP - CEP 68902-100.

Todas as vias do contrato social a serem recebidos o visto devem estar com firmas reconhecidas nas assinaturas dos sócios.

A documentação será carimbada, assinada e devolvida ao endereço do remetente.



Informo que visto prévio ainda é realizado de forma física, o carimbo do CAU é inserido fisicamente nas folhas da alteração contratual.
O CAU ainda não possui visto prévio de forma digital.

Atenciosamente,
`;
            document.getElementById('despacho4').setAttribute('data-text', texto_4);
            document.getElementById('editTextModal4').value = texto_4;
            var texto_5 = `Atendimento presencial confirmado dia / /2024 (XXXX-feira) as 00:00 na sede do CAU/AP

CAU/AP - Av Caramuru, 356, Beirol, Macapá/AP - CEP 68902-100.



Atenciosamente,

(Identificação)
`;
            document.getElementById('despacho5').setAttribute('data-text', texto_5);
            document.getElementById('editTextModal5').value = texto_5;
            var texto_6 = `Por gentileza enviar a alteração contratual por e-mail para análise.

A alteração contratual estando apta para o deferimento visto prévio(que é o carimbo do CAU nas folhas do contrato social ou alteração contratual para posteriormente ser registrado em cartório) poderá ser agendado atendimento presencial
Há opção também do envio das vias originais da alteração contratual pelos correios. (Caso seja enviado pelos correios, a documentação será carimbada, assinada e enviada para o endereço do remetente).

Informo que não há taxa a ser paga.



Aguardamos o envio da alteração contratual para análise.

Qualquer dúvida, a disposição



Atenciosamente,
`;
            document.getElementById('despacho6').setAttribute('data-text', texto_6);
            document.getElementById('editTextModal6').value = texto_6;
            var texto_7 = `Informo que a empresa XXXXXXXXXXXXXXXXXX, CNPJ: XXXXXXXXXXXXXXXX não se encontra registrada no Conselho de Arquitetura, desta forma por gentileza enviar alteração contratual anterior já registrada em Cartório ou (JUCAP se for o caso) para verificação da necessidade do registro da empresa perante o CAU, antes do deferimento do visto prévio na alteração contratual enviada.
`;
            document.getElementById('despacho7').setAttribute('data-text', texto_7);
            document.getElementById('editTextModal7').value = texto_7;
        </script>
    </body>
</html>